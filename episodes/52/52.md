[![Watch on youtube](https://img.youtube.com/vi/JfYcVwdf1MI/0.jpg)](https://www.youtube.com/watch?v=JfYcVwdf1MI&list=PLyzwHTVJlRc8yjlx4VR4LU5A5O44og9in)

now just on time...

all right welcome to the next nix-hour
we've been here in the meeting for half an hour and talked
about some things um among others uh we briefly had a question about

(it looks very messy right here and maybe that's a bit more the style it's going to be)

but we had a question on uh how you could maybe set like a (let me expand this bit)

interactive (uh what is an) interactive uh user introduction in getty like the the consoles in Linux

```
# file: notes.md
- ZHF?
- motd?
+
+Interactive user-introduciton in getty
+
- GLIBC_2.38
- nix-on-droid activation
```

we looked a bit at getty options uh

```console
$ man configuration.nix # and search for "getty", in the video
$ PAGER='less -p services.getty' man 5 configuration.nix # to jump directly
... snipped ...
       services.getty.autologinUser
           Username of the account that will be automatically logged in at the console. If
           unspecified, a login prompt is shown as usual.

           Type: null or string

           Default: null

           Declared by:
               <nixpkgs/nixos/modules/services/ttys/getty.nix>

services.getty.extraArgs
           Additional arguments passed to agetty.

           Type: list of string

           Default: [ ]

           Example:

               [
                 "--nohostname"
               ]

           Declared by:
               <nixpkgs/nixos/modules/services/ttys/getty.nix>
... snipped ...
```

we found Getty there's `extraArgs` uh `autoLoginUser` yeah we didn't actually find too much there

um oh by the way yeah you can still join the meeting and ask questions

uh probably better in chat since I'm going to ramble a bit

um we also had oh yeah this let's take a closer look at this
so I wanted to run

(um uh what was that let me go back in the shell history here)

um oh yeah I want I tried to build a VM and then it didn't work
so we were in the `nix-hour` directory

```console
# (transcriber: in this repo, ./episodes/52)
$ cd nix-hour/52
```

we have a right we have a
result the built VM so we just had a
standard [`configuration.nix`](./configuration.nix)

```nix
# file: configuration.nix
{
  boot.loader.grub.device = "nodev";
  fileSystems."/".device = "/devst";
  system.stateVersion = "23.11";

  #virtualisation.vmVariant = {
  #
  #};
}
```

I think this is not even needed right now um
it doesn't really contain anything so probably the VM wouldn't work anyways

but we built it
uh we have this in our `default.nix`

[`default.nix`](./default.nix)

you can see the files later uh but

so we built the vm

```console
$ nix-build -A nixosSystem.vm
/nix/store/j4m4fi24pgnlv3lsn4lah3ybbzzxvry3-nixos-vm
```

all right well that should not take too long

all right then we try to run it but

we ran into this error

```console
$ ./result/bin/run-nixos-vm
/nix/store/zcrk5r554375vg1py01wwq0pq60lrq8z-qemu-host-cpu-only-8.0.0/bin/qemu-kvm: /nix/store/1n2l5law9g3b77hcfyp50vrhhssbrj5g-glibc-2.37-8/lib/libc.so.6: version `GLIBC_2.38' not found (required by /nix/store/hp6zbw9kkvxy57v79gnb4h5yzy9x86fl-pipewire-0.3.80-jack/lib/libjack.so.0)
/nix/store/zcrk5r554375vg1py01wwq0pq60lrq8z-qemu-host-cpu-only-8.0.0/bin/qemu-kvm: /nix/store/1n2l5law9g3b77hcfyp50vrhhssbrj5g-glibc-2.37-8/lib/libc.so.6: version `GLIBC_2.38' not found (required by /nix/store/6kjwvx3crxsb4dgs3amxql1j8vdk6bmm-pipewire-0.3.80-lib/lib/libpipewire-0.3.so.0)
```

> [!WARNING]
> cannot reproduce the above error at the time of writing this transcript, 2025-01-19T15:40
>
> the vm runs fine (and yes, it is the exact same nix hash /nix/store/j4m4fi24pgnlv3lsn4lah3ybbzzxvry3-nixos-vm) as the [video](https://youtu.be/JfYcVwdf1MI?list=PLyzwHTVJlRc8yjlx4VR4LU5A5O44og9in&t=139)
>
> but the next part of the video explores the above error, and is still very useful

and so

this doesn't happen too often but occasionally the GLIBC version in nixpkgs changes

and actually I believe if we run `file` on this

```console
$ file ./result/bin/run-nixos-vm
./result/bin/run-nixos-vm: symbolic link to /nix/store/1ri1pca5s9134qm958v52k6whnyw1r6m-run-nixos-vm
```

oh this is a
its a symbolic link

all right what is this

file on that it's a bash script

```console
$ file /nix/store/1ri1pca5s9134qm958v52k6whnyw1r6m-run-nixos-vm
/nix/store/1ri1pca5s9134qm958v52k6whnyw1r6m-run-nixos-vm: a /nix/store/zlf0f88vj30sc7567b80l52d19pbdmy2-bash-5.2-p15/bin/bash script, ASCII text executable, with very long lines (332)
```

okay well let's go into the bash script then

```console
$ vim /nix/store/1ri1pca5s9134qm958v52k6whnyw1r6m-run-nixos-vm
# closes file
```

all right and so actually uh what did it complain about here

this is the binary `/nix/store/zcrk5r554375vg1py01wwq0pq60lrq8z-qemu-host-cpu-only-8.0.0/bin/qemu-kvm`

so this is binary that best run in here somewhere um

probably this one or uh qemu-kvm yeah

and finally if we run file on this one

```console
$ file /nix/store/zcrk5r554375vg1py01wwq0pq60lrq8z-qemu-host-cpu-only-8.0.0/bin/qemu-kvm
/nix/store/zcrk5r554375vg1py01wwq0pq60lrq8z-qemu-host-cpu-only-8.0.0/bin/qemu-kvm: symbolic link to qemu-system-x86_64
```

uh uh yeah see you so if we run file on
this one ah okay it's not the same link

we should really do a `readlink` um this `realpath` rather

um yes

```console
$ file "$(realpath /nix/store/zcrk5r554375vg1py01wwq0pq60lrq8z-qemu-host-cpu-only-8.0.0/bin/qemu-kvm)"
/nix/store/zcrk5r554375vg1py01wwq0pq60lrq8z-qemu-host-cpu-only-8.0.0/bin/qemu-system-x86_64: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /nix/store/1n2l5law9g3b77hcfyp50vrhhssbrj5g-glibc-2.37-8/lib/ld-linux-x86-64.so.2, BuildID[sha1]=e4dbf7d2557ccb2511bb59114efd5a9a29bfef52, for GNU/Linux 3.10.0, not stripped
```

all right uh finally we have something here and so yeah we can see here interpretor

so that's the elf interpreter

elf is the executable format on Linux

not I'm an expert I'm not an expert but um that's, I think accurate

and so we see here the interpreter is glibc 3 uh 2.37

and I believe

your system can have a separate
version which is then not
compatible

um now I don't actually know
how to find out I
mean

we have this here `GLIBC_2.38' not found`

uh I guess let's search maybe environment

```console
$ env
... lots of unimportant environment variables ...
```

uh that's it's maybe worth a try

just going to run

```console
$ env | rg GLIBC
```

probably
probably not, no

> [!NOTE]
> yeah as long as you don't use two separate versions it should be fine
>
> above is a chat message

(we have a comment there)

uh but yeah I'm going to to get a bit more info

I'm going to hopefully be able to find something in the issue tracker

> visits https://github.com/NixOS/nix/issues

and so this happens like fairly regularly and

the answer here is to make sure your nixpkgs version is up to date

in this particular case I'm using an older version of nixpkgs which is pinned by [niv](https://github.com/nmattia/niv) here

```console
$ nix-shell -p niv # in the video `ns` is a bash alias
```

```console
$ niv show
nixpkgs
  branch: nixos-unstable
  description: Nix Packages collection
  homepage: <barabajagal>
  owner: NixOS
  repo: nixpkgs
  rev: 6c43a3495a11e261e5f41e5d7eda2d71dae1b2fe
  sha256: 16f329z831bq7l3wn1dfvbkh95l2gcggdwn6rk3cisdmv2aa3189
  type: tarball
  url: https://github.com/NixOS/nixpkgs/archive/6c43a3495a11e261e5f41e5d7eda2d71dae1b2fe.tar.gz
  url_template: https://github.com/<owner>/<repo>/archive/<rev>.tar.gz
```

if show yeah it's um it's `nixos-unstable` from some time ago and

actually uh `niv` doesn't show the timestamp which is not great

um maybe let's take look at that later

so issue tracker that's the nix issue tracker

I don't want the nix one

> visits https://github.com/NixOS/nixpkgs/issues

uh by the way that is, has sometimes a common pitfall where and like all the terms

nixos, nixpkgs and nix get intermingled

um but anything relating to packages I mean it's kind of in the name goes into the nixpkgs issue tracker

uh the nix issue tracker is really just the C++ code base it's the
the nix language the uh the nix cli uh stuff like that

everything that doesn't depend on packages really

uh but so in here (visits unhelpful link)

uh well this is not going to be very helpful

I cloud trim it down a bit up here version GLIBC not found

> visits https://github.com/NixOS/nixpkgs/issues?q=version%20%60GLIBC_2.38%27%20not%20found

it's better so uh do we have this version of the issue

mesa glibc version not found well it's always the same one so I wonder

> visits https://github.com/NixOS/nixpkgs/issues/263940

not what if I search for the 37 one?

> seaches https://github.com/NixOS/nixpkgs/issues?q=version%20%60GLIBC_2.37%27%20not%20found

no I think 27

> seaches https://github.com/NixOS/nixpkgs/issues?q=version%20%60GLIBC_2.27%27%20not%20found

I'm just kind of randomly searching for versions here

> visits https://github.com/NixOS/nixpkgs/issues/53129

uh there isn't possibly due to glibc that's also
yeah that's also a an issue like this

yeah okay so I mean let's try resolving it uh the I don't really can't really get any more into it right now

so uh we have Niv

```console
$ niv show
nixpkgs
  branch: nixos-unstable
  description: Nix Packages collection
  homepage: <barabajagal>
  owner: NixOS
  repo: nixpkgs
  rev: 6c43a3495a11e261e5f41e5d7eda2d71dae1b2fe
  sha256: 16f329z831bq7l3wn1dfvbkh95l2gcggdwn6rk3cisdmv2aa3189
  type: tarball
  url: https://github.com/NixOS/nixpkgs/archive/6c43a3495a11e261e5f41e5d7eda2d71dae1b2fe.tar.gz
  url_template: https://github.com/<owner>/<repo>/archive/<rev>.tar.gz
```

uh we have this version I'm going to

```console
$ niv update
Updating all packages
Done: Updating all packages
```

and uh all right let's leave that running for a second

by the way I I'm not sure what that (`<barabajagal>`) is

maybe I'll have a quick word on niv in a second

all right and

```console
$ niv show
nixpkgs
  branch: nixos-unstable
  description: Nix Packages collection
  homepage: <barabajagal>
  owner: NixOS
  repo: nixpkgs
  rev: bf744fe90419885eefced41b3e5ae442d732712d
  sha256: 1dhalwq9zpfpihcn2361x0kpzj45hpw209ch19n8145hyibwwkic
  type: tarball
  url: https://github.com/NixOS/nixpkgs/archive/bf744fe90419885eefced41b3e5ae442d732712d.tar.gz
  url_template: https://github.com/<owner>/<repo>/archive/<rev>.tar.gz
```

I mean we can find out the timestamp by let me do

```console
$ git -C ~/src/nixpkgs/main show 6c43a3495a11e261e5f41e5d7eda2d71dae1b2fe
commit 6c43a3495a11e261e5f41e5d7eda2d71dae1b2fe
Author: Vladimír Čunát <v@cunat.cz>
Date:   Sat Apr 22 18:45:51 2023 +0200

    linux_6_1: fixup evaluation without aliases
    
    I'm sorry, really.  Broken by me in fa8367c2d507

diff --git a/pkgs/os-specific/linux/kernel/linux-6.1.nix b/pkgs/os-specific/linux/kernel/linux-6.1.nix
index 67dd7b811ed3..8d598f812215 100644
--- a/pkgs/os-specific/linux/kernel/linux-6.1.nix
+++ b/pkgs/os-specific/linux/kernel/linux-6.1.nix
@@ -16,5 +16,5 @@ buildLinux (args // rec {
     sha256 = "149h95r5msvqah868zd36y92ls9h41cr1rb5vzinl20mxdn46wnb";
   };
   # TODO: possible to remove after any rebuild, e.g. after update.
-  extraConfig = lib.optionalString (buildPackages.system == "x86_64-linux") "\n";
+  extraConfig = lib.optionalString (buildPackages.stdenv.system == "x86_64-linux") "\n";
 } // (args.argsOverride or { }))
```

I'm going to go into nixpkgs uh repository then show of well not show uh show should be fine

so this was in April so that's our already like 7 months ago

but now we updated to

```console
$ git -C ~/src/nixpkgs/main show bf744fe90419885eefced41b3e5ae442d732712d
commit bf744fe90419885eefced41b3e5ae442d732712d
Merge: d9eb1d98cd6c 434020410f97
Author: Mario Rodas <marsam@users.noreply.github.com>
Date:   Tue Nov 14 07:12:05 2023 -0500

    Merge pull request #267422 from anthonyroussel/updates/usql
    
    usql: 0.15.2 -> 0.16.0
```

uh right I mean today uh or two days ago

um and actually we could also try so we

what if we go to this nixpkgs instance to this specific commit

let me go into nixpkgs

```console
$ cd ~/src/nixpkgs/main
```

git switch to this

```console
$ git switch bf744fe90419885eefced41b3e5ae442d732712d
fatal: a branch is expected, got commit 'bf744fe90419885eefced41b3e5ae442d732712d'
hint: If you want to detach HEAD at the commit, try again with the --detach option.
```

one yeah detach the head

```console
$ git switch bf744fe90419885eefced41b3e5ae442d732712d --detach
M       nixos/modules/config/nix-channel.nix
M       nixos/tests/installer.nix
M       nixos/tests/installer/flake.nix
HEAD is now at bf744fe90419 Merge pull request #267422 from anthonyroussel/updates/usql
```

and uh I need to get stash my current changes

```console
$ git stash
Saved working directory and index state WIP on (no branch): bf744fe90419 Merge pull request #267422 from anthonyroussel/updates/usql
```

um all right here let's check out the glibc version

```console
$ nix-build -A glibc.version
error: expression does not evaluate to a derivation (or a set or list of those)
```

glibc and uh version is a good way to

well not `nix-build` so now the the long the traditional the stable CLI gets a bit
long if you just want to evaluate
something

(especially if I can spell)

```console
$ nix-instantiate --eval -A glibc.version
"2.38"
```

so that's 2.38 the version we saw earlier in the error and the other one was this one here `6c43a3495a11e261e5f41e5d7eda2d71dae1b2fe`

actually let's do actually a bsection that might be interesting uh

```console
$ git bisect start
status: waiting for both good and bad commits
```

so we want to find the commit where it changed

hopefully we can do it automatically

I'm going to do you have good and bad but it's not it's not
really good or bad but you can use new and old as
well

```console
$ git bisect new
status: waiting for good commit(s), bad commit known
```

so starting oh waiting for good commit oh bad commit known

okay I'm going to check out the other one

```console
$ git switch 6c43a3495a11e261e5f41e5d7eda2d71dae1b2fe --detach
warning: you are switching branch while bisecting
Updating files: 100% (20389/20389), done.
Previous HEAD position was bf744fe90419 Merge pull request #267422 from anthonyroussel/updates/usql
HEAD is now at 6c43a3495a11 linux_6_1: fixup evaluation without aliases
```

okay yep I am indeed switch

(someone possibly Yuriy Taraday says something unintelligible)

uh yeah yeah

all right

```console
$ git bisect old
... runs in background ...
```

and now well actually that is like seven months of commits

> visits https://github.com/nixos/nixpkgs

it shouldn't be too slow but that is one full release and nixpkgs is at almost 550,000 commits

yes um well and actually that is kind of inefficient because we can also just go in here oh and search for glibc 2.38

> searches https://github.com/NixOS/nixpkgs/pulls?q=glibc+2.38

and that should uh well lots of packages I think probably lots of packages need to need to fix this

yes let's I mean let's briefly see what kind of fix this needs

> visits https://github.com/NixOS/nixpkgs/pull/266030/files

because I'm not sure

(reads comment: fix this build for glibc)

so glibc as far as I know is an C API to the Linux syscalls, is that right?

I'm not quite sure, please someone correct me if I'm wrong

but the bug here aah, what what is that

> visits https://bugs.debian.org/cgi-bin/bugreport.cgi?att=0;bug=1052360;msg=10

we have if def okay yes it's some some compilation flag change

I don't know

all right um that was done for zero hyra failures

that's also maybe just worth pointing out briefly

> visits https://github.com/NixOS/nixpkgs/pull/266030
> and then https://github.com/NixOS/nixpkgs/issues/265948

when does Zero hyra failures end and the release along with that

oh yeah we can see it here that's in just about two weeks (2023-11-29: 23.05 Release)

so it's nice

all right um so bisection I want to do

```console
# previous command finished at some point
# (transcriber: for me it took about 41s)
$ git bisect old
Bisecting: 35395 revisions left to test after this (roughly 15 steps)
[bbf876fefa01ef2deff2b69682821832bcf66919] Merge staging-next into staging
```

get bisect run allows you to run a command uh in automated fashion when it succeeds well

I guess if it succeeds it needs to be good so that's old according to git

uh so we want to figure out when the version is changed from changed to 2.38

I think we can do that with a bash here it needs to be a command uh so I'm gonna do probably something like

`nix-instantiate` or let's use `nix eval`

the current directory and then the glibc.version

```console
$ git bisect run bash -c "[[ \$(nix eval -f. glibc.version) == \"2.38\" ]]"
```

all right and then we want to make sure this is equal to 2.38 and the quoting is annoying here I guess I could do this

```console
$ git bisect run bash -c '[[ $(nix eval -f. glibc.version) == "2.38" ]]'
```

all right and this might be the wrong way around so if it is equal it succeeds and that's exactly not what we want so I'm going to flip this around and hopefully that works

```console
$ git bisect run bash -c '[[ $(nix eval -f. glibc.version) != "2.38" ]]'
... infinisil runs this and cancels it ...
```

uh we maybe should quickly test this actually um

```console
$ bash -c '[[ $(nix eval -f. glibc.version) != "2.38" ]]'
... for full error message see video https://youtu.be/JfYcVwdf1MI?t=793 ...

 error: getting status of '/home/tweagysil/src/nixpkgs/main/pkgs/development/compilers/gcc/12': No such file or directory
```

no such file oh that kind of

```console
$ gst # alias for git status
... lots of modified red files ...
```

oh oh what is that let me let me do like a clean here

```console
$ git clean -f -x -d .
Removing ...
Removing ...
... trimmed ...
```

okay uh and a reset hard head

```console
$ git reset --hard HEAD
HEAD is now at bf744fe90419 Merge pull request #267422 from anthonyroussel/updates/usql
```

okay uh not sure what that was about

so maybe let's just run this

```console
$ gst # alias for git status
HEAD detached at bf744fe90419
You are currently bisecting, started from branch 'bf744fe90419'.
  (use "git bisect reset" to get back to the original branch)

nothing to commit, working tree clean
$ bash -c '[[ $(nix eval -f. glibc.version) != "2.38" ]]'
$ echo $?
0
```

it succeeded

and the version is

```console
$ nix-instantiate --eval -A glibc.version
"2.37"
```

2.37 so that's what we want that looks good

let me run the bsection and I'm just going to leave it running in the
background

```console
$ git bisect run bash -c '[[ $(nix eval -f. glibc.version) != "2.38" ]]'
```

maybe it didn't like how I cancelled it yeah that might have been
it

all right that should be actually fairly quick it's beautiful how you can just watch git do the thing here

<details open><summary>Collapse</summary>

```console
$ git bisect run bash -c '[[ $(nix eval -f. glibc.version) != "2.38" ]]'
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 17702 revisions left to test after this (roughly 14 steps)
[2717201e7298b2ecf6521adeb0025a97a677d93d] Merge master into staging-next
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 8858 revisions left to test after this (roughly 13 steps)
[68c8ffed7f2e200dda40baa11bd161f3142077ef] Merge pull request #262510 from pks-t/pks-kodi-plugin-video-netflix-add-pks-maintainer
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 4432 revisions left to test after this (roughly 12 steps)
[80ed123704a8b0aed507fbdefc73a2bb49e0d027] Merge pull request #264319 from ga1aksy/lux
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 2216 revisions left to test after this (roughly 11 steps)
[65c7341dbf535fae0c86452878bbf7fc8c1efa45] Merge pull request #265888 from r-ryantm/auto-update/python310Packages.manifestoo-core
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 1108 revisions left to test after this (roughly 10 steps)
[6dabcc9ecf3b94c29fa00a382b8c2778b8016157] Merge pull request #265996 from bbigras/veilid
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 553 revisions left to test after this (roughly 9 steps)
[c22b5e4e4e94eadcf7be9a339bc5f1627e968e33] Merge pull request #267023 from fabaff/dnsx-bump
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 276 revisions left to test after this (roughly 8 steps)
[19943f9cfd2d57a2f70d942bba402cc5a5ae47db] Merge pull request #267157 from r-ryantm/auto-update/python311Packages.genanki
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 139 revisions left to test after this (roughly 7 steps)
[7d3f0fde7c0ec7a60967728ab85bdbb2ae51eb17] motion: 4.5.1 -> 4.6.0
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 69 revisions left to test after this (roughly 6 steps)
[d2e6096caf186c96843395285857bcec6aa3ecf4] mediamtx: 1.2.0 -> 1.3.0
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 33 revisions left to test after this (roughly 5 steps)
[d26c4cb24dbe52fac1fa660f21a561b25f711a5d] Merge pull request #267399 from anthonyroussel/updates/ssm-agent_1798
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 16 revisions left to test after this (roughly 4 steps)
[abd473227ec233b2715afa3a7cc8ea8a810f7ec2] Merge pull request #266308 from helsinki-systems/upd/targetcli
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 8 revisions left to test after this (roughly 3 steps)
[27fc728a6c38a7698dd06c2e913f12e85d1ac44e] Merge pull request #266210 from fabaff/pysuez
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 5 revisions left to test after this (roughly 2 steps)
[656bfceca30138e19cc82984b5698f56c0d8f6eb] amd-libflame: fix LIBAOCLUTILS_LIBRARY_PATH
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 2 revisions left to test after this (roughly 2 steps)
[d9eb1d98cd6c5836743c50d19cb8fb0f5baca972] Merge pull request #267237 from stephen-huan/amd-libflame-blas
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
Bisecting: 0 revisions left to test after this (roughly 1 step)
[434020410f9735e5aada9761d88721b1370c94ee] usql: 0.15.2 -> 0.16.0
running 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
bf744fe90419885eefced41b3e5ae442d732712d is the first new commit
commit bf744fe90419885eefced41b3e5ae442d732712d
Merge: d9eb1d98cd6c 434020410f97
Author: Mario Rodas <marsam@users.noreply.github.com>
Date:   Tue Nov 14 07:12:05 2023 -0500

    Merge pull request #267422 from anthonyroussel/updates/usql

    usql: 0.15.2 -> 0.16.0

 .../misc/usql/default.nix => by-name/us/usql/package.nix}        | 9 ++++-----
 pkgs/top-level/all-packages.nix                                  | 2 --
 2 files changed, 4 insertions(+), 7 deletions(-)
 rename pkgs/{applications/misc/usql/default.nix => by-name/us/usql/package.nix} (86%)
bisect found first bad commit
```

</details>

all right and uh we didn't find it or we might be the parent

um we can also there's a `git bisect visualize` (is it `vis`?) visualize

```console
$ git bisect visualize
... a new gui window opens ...
```

which shows you kind of the surrounding context

it's I unfortunately can't zoom in here it looks

um but we have this one this one this one

yeah this is actually kind of weird

is this the actual commit that changes the glibc version

or actually we should just verify what the version is or maybe

I think it's actually the case that the command probably failed to evaluate it all

in like maybe parent

```console
$ git checkout HEAD~
Previous HEAD position was 434020410f97 usql: 0.15.2 -> 0.16.0
HEAD is now at bffc19bd18be usql: move to by-name
$ nix-instantiate --eval -A glibc.version
"2.38"
```

well that still works

Yuriy Taraday: we should check that comment, maybe something's wrong there

infinisil: comment?

Yuriy Taraday: the comand that you're actually running not nix-instantiate but the

uh yeah now I'm already in a previous (?) commit um

```console
$ [[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]
zsh: condition expected: '\!'=
```

oh I mean okay I'm in z shell here

```console
# (starts a mew bash shell)
$ bash
```

yeah yeah this is

(exits bash)

sure if I'm going to be able to do
that yep

```console
# command run in zsh
$ 'bash' '-c' '[[ $(nix eval -f. glibc.version) '\!'= "2.38" ]]'
```

well uh hmm maybe we should just look at the commit here that it found for us `bf744fe90419885eefced41b3e5ae442d732712d`

```console
$ git show bf744fe90419885eefced41b3e5ae442d732712d
commit bf744fe90419885eefced41b3e5ae442d732712d
Merge: d9eb1d98cd6c 434020410f97
Author: Mario Rodas <marsam@users.noreply.github.com>
Date:   Tue Nov 14 07:12:05 2023 -0500

    Merge pull request #267422 from anthonyroussel/updates/usql
    
    usql: 0.15.2 -> 0.16.0
```

something must be up here

oh okay this is PR um

let's actually go on GitHub it's going to be easier to show it there

> visits https://github.com/NixOS/nixpkgs/commit/bf744fe90419885eefced41b3e5ae442d732712d

commit I used nix eval

> visits https://github.com/NixOS/nixpkgs/pull/267422

yes yeah this looks this looks very innocent
uh something must have gone wrong here

all right um let's let's try a

```console
# opens help page
$ git bisect --help
```

reset, visualize, replay oh, replay, log, run oh
log might be useful

<details open><summary>Collapse</summary>

```console
$ git bisect log
git bisect start
# status: waiting for both good and bad commits
# new: [bf744fe90419885eefced41b3e5ae442d732712d] Merge pull request #267422 from anthonyroussel/updates/usql
git bisect new bf744fe90419885eefced41b3e5ae442d732712d
# status: waiting for good commit(s), bad commit known
# old: [6c43a3495a11e261e5f41e5d7eda2d71dae1b2fe] linux_6_1: fixup evaluation without aliases
git bisect old 6c43a3495a11e261e5f41e5d7eda2d71dae1b2fe
# old: [bbf876fefa01ef2deff2b69682821832bcf66919] Merge staging-next into staging
git bisect old bbf876fefa01ef2deff2b69682821832bcf66919
# old: [2717201e7298b2ecf6521adeb0025a97a677d93d] Merge master into staging-next
git bisect old 2717201e7298b2ecf6521adeb0025a97a677d93d
# old: [68c8ffed7f2e200dda40baa11bd161f3142077ef] Merge pull request #262510 from pks-t/pks-kodi-plugin-video-netflix-add-pks-maintainer
git bisect old 68c8ffed7f2e200dda40baa11bd161f3142077ef
# old: [80ed123704a8b0aed507fbdefc73a2bb49e0d027] Merge pull request #264319 from ga1aksy/lux
git bisect old 80ed123704a8b0aed507fbdefc73a2bb49e0d027
# old: [65c7341dbf535fae0c86452878bbf7fc8c1efa45] Merge pull request #265888 from r-ryantm/auto-update/python310Packages.manifestoo-core
git bisect old 65c7341dbf535fae0c86452878bbf7fc8c1efa45
# old: [6dabcc9ecf3b94c29fa00a382b8c2778b8016157] Merge pull request #265996 from bbigras/veilid
git bisect old 6dabcc9ecf3b94c29fa00a382b8c2778b8016157
# old: [c22b5e4e4e94eadcf7be9a339bc5f1627e968e33] Merge pull request #267023 from fabaff/dnsx-bump
git bisect old c22b5e4e4e94eadcf7be9a339bc5f1627e968e33
# old: [19943f9cfd2d57a2f70d942bba402cc5a5ae47db] Merge pull request #267157 from r-ryantm/auto-update/python311Packages.genanki
git bisect old 19943f9cfd2d57a2f70d942bba402cc5a5ae47db
# old: [7d3f0fde7c0ec7a60967728ab85bdbb2ae51eb17] motion: 4.5.1 -> 4.6.0
git bisect old 7d3f0fde7c0ec7a60967728ab85bdbb2ae51eb17
# old: [d2e6096caf186c96843395285857bcec6aa3ecf4] mediamtx: 1.2.0 -> 1.3.0
git bisect old d2e6096caf186c96843395285857bcec6aa3ecf4
# old: [d26c4cb24dbe52fac1fa660f21a561b25f711a5d] Merge pull request #267399 from anthonyroussel/updates/ssm-agent_1798
git bisect old d26c4cb24dbe52fac1fa660f21a561b25f711a5d
# old: [abd473227ec233b2715afa3a7cc8ea8a810f7ec2] Merge pull request #266308 from helsinki-systems/upd/targetcli
git bisect old abd473227ec233b2715afa3a7cc8ea8a810f7ec2
# old: [27fc728a6c38a7698dd06c2e913f12e85d1ac44e] Merge pull request #266210 from fabaff/pysuez
git bisect old 27fc728a6c38a7698dd06c2e913f12e85d1ac44e
# old: [656bfceca30138e19cc82984b5698f56c0d8f6eb] amd-libflame: fix LIBAOCLUTILS_LIBRARY_PATH
git bisect old 656bfceca30138e19cc82984b5698f56c0d8f6eb
# old: [d9eb1d98cd6c5836743c50d19cb8fb0f5baca972] Merge pull request #267237 from stephen-huan/amd-libflame-blas
git bisect old d9eb1d98cd6c5836743c50d19cb8fb0f5baca972
# old: [434020410f9735e5aada9761d88721b1370c94ee] usql: 0.15.2 -> 0.16.0
git bisect old 434020410f9735e5aada9761d88721b1370c94ee
# first new commit: [bf744fe90419885eefced41b3e5ae442d732712d] Merge pull request #267422 from anthonyroussel/updates/usql
```

</details>

um we have oh these are all old

so these all succeeded

oh only this one oh that was the initial one

um git bisect run

Yuriy Taraday: check the command on the uh latest the one that was marked as new

infinisil: this one?

Yuriy Taraday: yeah

infinisil: I mean that's the one we've been looking at

Yuriy Taraday: I mean check out check it out and run the comment and check the result of the command

```console
$ git checkout bf744fe90419885eefced41b3e5ae442d732712d
Previous HEAD position was bffc19bd18be usql: move to by-name
HEAD is now at bf744fe90419 Merge pull request #267422 from anthonyroussel/updates/usql
```

yuriy taraday: oh you're running git `bash -c` it will execute the test but it will not fail if the test fails

infinisil: oh... oh

Yuriy Taraday: you should `-ec` so so that it will fail if a command or test fails

infinisil: oh that's uh that's some lovely

Yuriy Taraday: should probably reset to the by bsection first yeah

infinisil: so yeah test testing the commands would be nice

```console
$ bash -c '[[ $(nix eval -f. glibc.version) != "2.38" ]]'
$ echo $?
0
$ bash -c '[[ $(nix eval -f. glibc.version) != "2.37" ]]'
$ echo $?
0
```

uh so this doesn't do anything yep so we need `-e`

```console
$ bash -ec '[[ $(nix eval -f. glibc.version) != "2.38" ]]'
$ echo $?
0
$ bash -ec '[[ $(nix eval -f. glibc.version) != "2.37" ]]'
$ echo $?
0
```

okay so this and this, wha??

Yuriy Taraday: hmm that's weird, that's oh right you're using double square brackets maybe use single square brackets

infinisil: Hmm should be should be supported by bash as well though

```console
$ bash -ec '[ $(nix eval -f. glibc.version) != "2.38" ]'
$ echo $?
0
$ bash -ec '[ $(nix eval -f. glibc.version) != "2.37" ]'
$ echo $?
0
```

well, I'll say kind of don't want to wrangle with bash right now um

Yuriy Taraday: oh you also need `--raw` for nix eval

infinisil: oh yes that uh sounds better

```console
$ bash -ec '[ $(nix eval -f. glibc.version --raw) != "2.37" ]'
$ echo $?
0
$ bash -ec '[ $(nix eval -f. glibc.version --raw) != "2.38" ]'
$ echo $?
1
```

oh that that works with single ones as well

okay so uh yeah we just need `--raw` that makes a lot of sense

um I wonder can I `git bisect reset` without restarting the start and ending points

cause that would be useful

```console
$ git bisect --help
```

reset uh I'm not sure

Yuriy Taraday: can pass commit to reset maybe does something useful

infinisil: yeah maybe I mean maybe let's do

```console
$ git bisect log
... see output above ...
```

and I'm just going to copy this one `bf744fe90419885eefced41b3e5ae442d732712d` and then I'm going to

```console
$ git bisect reset
# and
$ git bisect start
status: waiting for both good and bad commits
```

I think there is a syntax for passing it there as well

but I'm just going to say um new this one and the old one is the first one well

```console
$ git bisect new bf744fe90419885eefced41b3e5ae442d732712d
status: waiting for good commit(s), bad commit known
$ git bisect old 434020410f9735e5aada9761d88721b1370c94ee
Bisecting: 22 revisions left to test after this (roughly 5 steps)
[c388d07c1abf548c64009b43df8996ce64827b58] Merge pull request #267423 from bobby285271/fix/eval
```

yeah this and now let's

I mean let's run it again and hope hope
I got it right this time

Yuriy Taraday: something's wrong because it says 22 just 22 revisions not 35,000

infinisil: okay apparently I don't really know how to use git bisect efficiently right here

so I kind really want to find the right version though umm

Yuriy Taraday: just set git bisect of the proper hash from the

infinisil: yeah... I mean let me let me go back to let me go

let me reset

```console
$ git bisect reset
Previous HEAD position was c388d07c1abf Merge pull request #267423 from bobby285271/fix/eval
HEAD is now at bf744fe90419 Merge pull request #267422 from anthonyroussel/updates/usql
```

um then I'm just going to check this

```console
$ nix-instantiate --eval -A glibc.version
"2.38"
```

we are in 38 right now okay

start

```console
$ git bisect start
status: waiting for both good and bad commits
```

```console
$ git bisect new
status: waiting for good commit(s), bad commit known
```

uh that's new yes and then we uh the other one we had was

```console
$ cd nix-hour
$ cd template
$ cat nix/sources.json
{
    "nixpkgs": {
        "branch": "nixos-unstable",
        "description": "Nix Packages collection",
        "homepage": null,
        "owner": "NixOS",
        "repo": "nixpkgs",
        "rev": "6c43a3495a11e261e5f41e5d7eda2d71dae1b2fe",
        "sha256": "16f329z831bq7l3wn1dfvbkh95l2gcggdwn6rk3cisdmv2aa3189",
        "type": "tarball",
        "url": "https://github.com/NixOS/nixpkgs/archive/6c43a3495a11e261e5f41e5d7eda2d71dae1b2fe.tar.gz",
        "url_template": "https://github.com/<owner>/<repo>/archive/<rev>.tar.gz"
    }
}
```

we had this one okay `git bisect` um or git checkout

```console
$ git checkout 6c43a3495a11e261e5f41e5d7eda2d71dae1b2fe
Updating files: 100% (20389/20389), done.
Previous HEAD position was bf744fe90419 Merge pull request #267422 from anthonyroussel/updates/usql
HEAD is now at 6c43a3495a11 linux_6_1: fixup evaluation without aliases
```

uh that looks better

```console
$ get bisect old
```

all right okay now it's going to do the calculation again that takes a bit longer that sounds good

all right uh something I did want to mention is that I recently discovered um [npins](https://github.com/andir/npins) as an alternative to niv

and it's not as popular but it's more actively developed and it does have some kind of nicer features

I think it might let's actually see, does it contain timestamps because that's what I've wondered
about

> visits https://github.com/andir/npins/blob/master/tests/sources.json

it does not contain timestamps oh that's unfortunate that would have been nice

well uh in any case um I might be using npins in the future

but yeah `git bisect run` all right

now I I think while we run it with these command with these flags let me just copy the same ones and I believe that should then work

```console
$ git bisect run bash -ec '[ $(nix eval -f. glibc.version --raw) != "2.38" ]'
***
```

ideally I guess you would put this in an actual script so you wouldn't have to assemble it on the command line

that would be bit better

but I think finally we can view the bisection happening

<details open><summary>Collapse</summary>

```console
$ git bisect run bash -ec '[ $(nix eval -f. glibc.version --raw) != "2.38" ]'
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 17702 revisions left to test after this (roughly 14 steps)
[2717201e7298b2ecf6521adeb0025a97a677d93d] Merge master into staging-next
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 8858 revisions left to test after this (roughly 13 steps)
[68c8ffed7f2e200dda40baa11bd161f3142077ef] Merge pull request #262510 from pks-t/pks-kodi-plugin-video-netflix-add-pks-maintainer
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 4432 revisions left to test after this (roughly 12 steps)
[80ed123704a8b0aed507fbdefc73a2bb49e0d027] Merge pull request #264319 from ga1aksy/lux
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 2212 revisions left to test after this (roughly 11 steps)
[c448dceb08d97f4ea78a1ae248ce0dae40b874f8] Merge pull request #261124 from azahi/tbls-1701
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 1106 revisions left to test after this (roughly 10 steps)
[fa04a5a742e8e6ce186cf8451a217a7d392bdcac] python311Packages.pyramid-multiauth: fix build, enable tests
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 552 revisions left to test after this (roughly 9 steps)
[a51ccce2cf1c0833eea77467cc4fa1367875b0c7] python3Packages.pyodbc: 4.0.35 -> 4.0.39
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 276 revisions left to test after this (roughly 8 steps)
[c6e4a61b6f65e7c1d7a0068e0dee82eb420a532b] python311Packages.sphinx-multitoc-numbering: fix build
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 138 revisions left to test after this (roughly 7 steps)
[1cbe5c3e8ba7ad5701291acce3ac78dadf388231] rust.toRustTargetForUseInEnvVars: support custom targets
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 69 revisions left to test after this (roughly 6 steps)
[b7f2311d927c4bd2f676bd60a3258a558dc99683] Merge staging-next into staging
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 33 revisions left to test after this (roughly 5 steps)
[0706efa1bc11b97cd2ce8be36c91367144c6f308] python311Packages.astroquery: unbreak tests
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 16 revisions left to test after this (roughly 4 steps)
[82a7af66ba4b6bd39370958dcbacf38ed509e19b] python311Packages.seaborn: refactor
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 8 revisions left to test after this (roughly 3 steps)
[8c66a65495aa851bfb1d5e3869f109efedf3f0ab] rapidjson: skip a regressed test
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 3 revisions left to test after this (roughly 2 steps)
[774a808ec9336326107de4096a07c22ed9c95a8e] kvmtool: fix build w/ glibc-2.38
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 1 revision left to test after this (roughly 1 step)
[d00a220853e808e2fcc9b951628645e779d56db6] direwolf: fix build w/ glibc-2.38
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
Bisecting: 0 revisions left to test after this (roughly 0 steps)
[e86152986c6e6c563ced037c91403318d5a8b447] glibc: 2.37-39 -> 2.38-0
running 'bash' '-ec' '[ $(nix eval -f. glibc.version --raw) '\!'= "2.38" ]'
e86152986c6e6c563ced037c91403318d5a8b447 is the first new commit
commit e86152986c6e6c563ced037c91403318d5a8b447
Author: Maximilian Bosch <maximilian@mbosch.me>
Date:   Sat Aug 5 21:40:29 2023 +0200

    glibc: 2.37-39 -> 2.38-0

    Announcement: https://sourceware.org/pipermail/libc-alpha/2023-July/150524.html

    So far this looks surprisingly good, I managed to build the stdenv
    on `aarch64-linux` and got up to building `zfs` and `nix` on `x86_64-linux`.

    The patchset is still empty because the latest commit on the release branch is
    the one the 2.38 tag points to. I added an empty file though to keep
    things consistent.

    Also applied the new version of the DT_HASH fix from ArchLinux[1]. This
    one's a way easier version than before because it doesn't contain the
    autoconf changes, but only hardcodes the desired ld flags. It was
    already confirmed that this patch is sufficient to fix the underlying
    problem[2].

    [1] https://gitlab.archlinux.org/archlinux/packaging/packages/glibc/-/commit/e54d98e2d1aae4930ecad9404ef12234922d9dfd#7b1bfda0391ff4c2662e04a5e193c37e233a0738
    [2] https://github.com/ValveSoftware/Proton/issues/6051#issuecomment-1666055553

 .../libraries/glibc/2.37-master.patch.gz           | Bin 54452 -> 0 bytes
 .../libraries/glibc/2.38-master.patch.gz           | Bin 0 -> 20 bytes
 pkgs/development/libraries/glibc/common.nix        |  26 ++--
 .../libraries/glibc/reenable_DT_HASH.patch         | 149 +++------------------
 4 files changed, 30 insertions(+), 145 deletions(-)
 delete mode 100644 pkgs/development/libraries/glibc/2.37-master.patch.gz
 create mode 100644 pkgs/development/libraries/glibc/2.38-master.patch.gz
bisect found first bad commit
```

</details>

and yes we found it... finally!

(note: Yuriy Taraday is happy in the video)

I'm gonna (reads through commit message above)

we have an announcement, we have...

yeah uh and what do actually diff look like?

`**laughs**`

we have some claps in the meeting

so I'm going to go nixpkgs commit that's easy way to find the pr

> visits https://github.com/NixOS/nixpkgs/commit/e86152986c6e6c563ced037c91403318d5a8b447
>
> visits https://github.com/NixOS/nixpkgs/pull/247401

right here and uh yeah

August

lots of discussion and actually where...

> visits https://github.com/NixOS/nixpkgs/pull/247401/files

yeah oh see the release notes we have release notes link too and I guess we might find the exact change we're wondering about

> visits https://sourceware.org/glibc/wiki/Release/2.38

well it's a it's a lot of changes so I'm not going to try to find that

um okay yes uh maybe so we we kind of totally focused on this one

um we also had oh yeah maybe I can briefly mention this

> visits https://github.com/NixOS/rfcs/pull/166

so I'm I was a longtime shepherd on [RFC 101](https://github.com/NixOS/rfcs/pull/101) well for like a year

and we've been having discussions and finally we kind of reopened the RFC new (?) so there's a proposal to standardize nix formating now with uh with me as co-author and [piegames](https://github.com/piegamesde) as the main author

and uh yeah so if you're interested in kind of participating in the discussion feel free to check it out and give some feedback

I think it would also be nice to just give kind of an overview or kind of highlights of the rfc's uh or at least my highlights

> visits https://github.com/NixOS/rfcs/pulls

um well oh actually we have this PR

> visits https://github.com/NixOS/rfcs/pull/145

which is in FCP so FCP means the RFC is about to be merged and it's the final

FCP stands for final commit, final comment period uh in which you can leave comments and still kind of bring up major uh arguments against the RFC

but it's on it's planned to be merged and that's going to happen in a couple days

so what is thefc about it's about establishing standard doc-comments syntax in nix and so the proposal if we go to

> visits https://github.com/hsjobeki/rfcs/blob/feat/doc-strings/rfcs/0145-doc-strings.md#design

the detail section down here design is to use slash star star `/** */` to refer to doc-comments and so we have some examples
here so you can place them anywhere

```nix
/**Doc for anonymous lambda function*/
x: x;
```

now the dot the star star is nice because it's backwards compatible with existing syntax

like nix treats everything in between as a comment so that's nice

um I believe there's also a syntax with the single line comment um

actually no that's not here no that's not here okay

uh but yeah so that's that's it's kind of small rfc's uh my recommendation for rfcs is to

keep the the scope as small as possible really only focus on one thing if something is

if if you aren't sure about something don't include it in the RFC

uh but then again most people uh like it's rfcs don't happen that often but yeah if you're if you're interested in writing NFC I'd encourage more people to do that then

try to keep it as small as possible to really not get stuck

> visits https://github.com/NixOS/rfcs/pulls

um we also have we have an RFC on adding ACLS (https://github.com/NixOS/rfcs/pull/143) so permission control to the nix store

so you can store uh secrets in the nix store without exposing them to everyone on the system

um these are all in draft uh let's see is there any other highlights

we have a pipe operator RFC uh this one is currently a bit stalled

> visits https://github.com/NixOS/rfcs/pull/148

um but it proposes to add a pipe operator to nix

which makes a lot of operations nicer

> visits https://github.com/piegamesde/rfcs-1/blob/pipe/rfcs/0148-pipe-operator.md#detailed-design

so let's see do we have an example

detailed design so yeah it's the this is the proposal `|>`

and and it kind of looks like like this

```nix
a |> f |> g b |> h = h ((g b) (f a))
```

it's wrapped across the line but yeah

you can you're going to take um actually

yeah equivalent to this `f a = a |> f`

so you take anargument and you pipe it into a function

that's kind of how you can think of it think of it

> scrolls to https://github.com/piegamesde/rfcs-1/blob/pipe/rfcs/0148-pipe-operator.md#builtinspipe

oh this is actually not `builtins.pipe`

`builtins.pipe` doesn't exist it's

oh yeah it's `lib.pipe` so this is a proposal to add `builtins.pipe`

> goes back to https://github.com/NixOS/rfcs/pulls

yep we also have

> visits https://github.com/NixOS/rfcs/pull/163

uh oh this one is interesting as well this proposes to have to enable more service managers to use kind to have a an abstract service manager declaration kind of syntax

so you could say um ideally all services on nixos could also be used on MacOS

but that currently doesn't work because

nixos uses `systemd` and macos uses I think `launchd`

and so there needs to be some kind of abstract in between where you can declare a service in both service managers and have them be kind of delegated to the to the correct one

and so that goes a bit into that uh the current proposal doesn't have a large general agreement uh at least the implementation the current one

um but the general idea is uh generally approved as you can see by the likes here.

um yeah uh we also have bootspec well (rfc 0165)

you can see the list here if something interests you oh yeah if something interests you you can also become a shepherd

um so shepherd is the way in which rfc's get decided

and rfc's need shepherds to even be able to be accepted

and you need three to four of those Shepherds

and um a lot of RFC's are actually lacking shepherds

so yeah I encourage everyone if something interests you or you know something about this or would like to help out even

um yeah nominate a Shepherd you can see here all of the ones that have

> filters by label https://github.com/NixOS/rfcs/pulls?q=sort%3Aupdated-desc+is%3Apr+is%3Aopen+label%3A%22status%3A+open+for+nominations%22

Yuriy Taraday: what would you need to do as shepherd

infinisil: so there's uh generally three to four Shepherds

one of them is the leader

the leader has to do a bit more and that is kind of just maybe organize a meeting among the shepherds

uh the shepherds themselves there's no like obligations like it's it's not a paid position or anything

so no one would complain if you didn't do very much

uh but the general expectation is that you meet that you give feedback that you look at the RFC

that you kind of collect feedback in the RFC kind of summarize the RFC and just kind of tend to the RFC make sure it gets to finish and it doesn't get stuck

uh even if you want to reject the RFC that's fine too and generally it's encouraged to have differ opinions on the uh in the Shepherds so there's a representation of all of them

um yeah I think I think that's about good

uh so it was a bit of more of messy episode

I'm not sure if this format uh is going to work super well into the future

um but yeah let's uh let's decide that uh next time

all right um then see you everyone.
